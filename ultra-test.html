<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Ultra Complet - Hybrid Master</title>
    <style>
        :root {
            --primary: #0f172a;
            --secondary: #1e293b;
            --accent: #3b82f6;
            --danger: #ef4444;
            --success: #10b981;
            --warning: #f59e0b;
            --info: #06b6d4;
            --purple: #8b5cf6;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            min-height: 100vh;
            line-height: 1.6;
        }

        .ultra-test-container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .ultra-header {
            text-align: center;
            margin-bottom: 30px;
            padding: 40px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 25px;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .ultra-header h1 {
            font-size: 3rem;
            margin-bottom: 20px;
            background: linear-gradient(45deg, var(--accent), var(--purple), var(--warning));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .scan-badge {
            display: inline-block;
            padding: 12px 30px;
            background: var(--info);
            border-radius: 25px;
            font-weight: bold;
            margin-top: 15px;
            font-size: 1.2rem;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        /* Navigation des Tests */
        .test-navigation {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            margin: 30px 0;
            padding: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
        }

        .nav-test-btn {
            padding: 12px 25px;
            background: var(--secondary);
            border: 2px solid var(--accent);
            border-radius: 15px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .nav-test-btn:hover {
            background: var(--accent);
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(59, 130, 246, 0.4);
        }

        .nav-test-btn.active {
            background: var(--accent);
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.6);
        }

        /* Sections de Test */
        .test-category {
            background: rgba(255, 255, 255, 0.03);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .category-header {
            color: var(--accent);
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid var(--accent);
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 15px;
        }

        .category-stats {
            display: flex;
            gap: 15px;
            font-size: 0.9rem;
        }

        .stat {
            padding: 5px 12px;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.1);
        }

        /* Grille de R√©sultats D√©taill√©s */
        .detailed-results {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }

        .test-case {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            border-left: 5px solid var(--danger);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .test-case::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--danger), var(--warning), var(--success));
        }

        .test-case.success {
            border-left-color: var(--success);
        }

        .test-case.warning {
            border-left-color: var(--warning);
        }

        .test-case.info {
            border-left-color: var(--info);
        }

        .test-case:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .test-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
            gap: 15px;
        }

        .test-title {
            font-weight: bold;
            color: var(--warning);
            font-size: 1.1rem;
            flex: 1;
        }

        .test-badge {
            padding: 6px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            white-space: nowrap;
        }

        .badge-error { background: var(--danger); }
        .badge-success { background: var(--success); }
        .badge-warning { background: var(--warning); color: black; }
        .badge-info { background: var(--info); }

        .test-description {
            color: #ccc;
            margin-bottom: 15px;
            font-size: 0.95rem;
            line-height: 1.5;
        }

        .test-details {
            background: rgba(255, 255, 255, 0.08);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
        }

        .test-solution {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(139, 92, 246, 0.1));
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid var(--info);
            font-size: 0.9rem;
        }

        .solution-title {
            color: var(--info);
            font-weight: bold;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Console Avanc√©e */
        .advanced-console {
            background: #0a0a0a;
            color: #00ff00;
            padding: 25px;
            border-radius: 15px;
            font-family: 'Courier New', monospace;
            height: 400px;
            overflow-y: auto;
            margin-top: 20px;
            border: 1px solid rgba(0, 255, 0, 0.2);
        }

        .console-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(0, 255, 0, 0.3);
        }

        .log-entry {
            margin-bottom: 10px;
            display: flex;
            gap: 15px;
            align-items: flex-start;
        }

        .log-timestamp {
            color: #666;
            min-width: 90px;
            font-size: 0.8rem;
        }

        .log-level {
            font-weight: bold;
            min-width: 80px;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.75rem;
            text-align: center;
        }

        .level-debug { background: #666; color: #fff; }
        .level-info { background: var(--info); color: #fff; }
        .level-warn { background: var(--warning); color: #000; }
        .level-error { background: var(--danger); color: #fff; }
        .level-success { background: var(--success); color: #fff; }

        .log-message {
            flex: 1;
            word-break: break-word;
        }

        /* Contr√¥les de Test */
        .test-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .control-btn {
            padding: 15px 30px;
            border: none;
            border-radius: 25px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .control-btn.primary {
            background: linear-gradient(135deg, var(--success), var(--info));
        }

        .control-btn.secondary {
            background: linear-gradient(135deg, var(--warning), var(--purple));
        }

        .control-btn.danger {
            background: linear-gradient(135deg, var(--danger), var(--warning));
        }

        .control-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.4);
        }

        /* Progressions */
        .progress-section {
            margin: 25px 0;
        }

        .progress-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .progress-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
        }

        .progress-number {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(45deg, var(--accent), var(--purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .progress-label {
            color: #ccc;
            font-size: 0.9rem;
        }

        /* Barre de progression */
        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--danger), var(--warning), var(--success));
            border-radius: 10px;
            transition: width 0.5s ease;
            width: 0%;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .ultra-test-container {
                padding: 10px;
            }
            
            .ultra-header h1 {
                font-size: 2rem;
            }
            
            .detailed-results {
                grid-template-columns: 1fr;
            }
            
            .test-navigation {
                flex-direction: column;
                align-items: center;
            }
            
            .nav-test-btn {
                width: 100%;
                text-align: center;
            }
        }

        /* Animations */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div class="ultra-test-container">
        <!-- Header -->
        <div class="ultra-header">
            <h1>üî¨ TEST ULTRA-COMPLET - HYBRID MASTER</h1>
            <p>Analyse exhaustive de l'architecture compl√®te - 100% non-invasive</p>
            <div class="scan-badge pulse" id="global-status">INITIALISATION DES TESTS...</div>
            
            <!-- Barre de progression globale -->
            <div class="progress-bar">
                <div class="progress-fill" id="global-progress"></div>
            </div>
        </div>

        <!-- Navigation -->
        <div class="test-navigation">
            <button class="nav-test-btn active" onclick="showCategory('modules')">üì¶ Modules JS</button>
            <button class="nav-test-btn" onclick="showCategory('dom')">üåê DOM & √âv√©nements</button>
            <button class="nav-test-btn" onclick="showCategory('data')">üìä Donn√©es & State</button>
            <button class="nav-test-btn" onclick="showCategory('performance')">‚ö° Performance</button>
            <button class="nav-test-btn" onclick="showCategory('architecture')">üèóÔ∏è Architecture</button>
        </div>

        <!-- Contr√¥les -->
        <div class="test-controls">
            <button class="control-btn primary" onclick="runAllTests()">
                üöÄ Lancer tous les tests
            </button>
            <button class="control-btn secondary" onclick="generateUltraReport()">
                üìä Rapport d√©taill√©
            </button>
            <button class="control-btn danger" onclick="stressTest()">
                üí• Test de stress
            </button>
        </div>

        <!-- Progression Globale -->
        <div class="progress-section">
            <div class="progress-grid">
                <div class="progress-item">
                    <div class="progress-number" id="total-tests">0</div>
                    <div class="progress-label">Tests Totaux</div>
                </div>
                <div class="progress-item">
                    <div class="progress-number" id="passed-tests">0</div>
                    <div class="progress-label">Tests R√©ussis</div>
                </div>
                <div class="progress-item">
                    <div class="progress-number" id="failed-tests">0</div>
                    <div class="progress-label">Tests √âchou√©s</div>
                </div>
                <div class="progress-item">
                    <div class="progress-number" id="coverage">0%</div>
                    <div class="progress-label">Couverture</div>
                </div>
            </div>
        </div>

        <!-- Cat√©gorie: Modules JavaScript -->
        <div class="test-category" id="category-modules">
            <div class="category-header">
                <h2>üì¶ MODULES JAVASCRIPT</h2>
                <div class="category-stats">
                    <div class="stat" id="modules-stats">0/0 tests</div>
                    <div class="stat" id="modules-coverage">0%</div>
                </div>
            </div>
            <div class="detailed-results" id="modules-results">
                <!-- R√©sultats d√©taill√©s des modules -->
            </div>
        </div>

        <!-- Cat√©gorie: DOM & √âv√©nements -->
        <div class="test-category" id="category-dom" style="display: none;">
            <div class="category-header">
                <h2>üåê DOM & √âV√âNEMENTS</h2>
                <div class="category-stats">
                    <div class="stat" id="dom-stats">0/0 tests</div>
                    <div class="stat" id="dom-coverage">0%</div>
                </div>
            </div>
            <div class="detailed-results" id="dom-results">
                <!-- R√©sultats d√©taill√©s du DOM -->
            </div>
        </div>

        <!-- Cat√©gorie: Donn√©es & State -->
        <div class="test-category" id="category-data" style="display: none;">
            <div class="category-header">
                <h2>üìä DONN√âES & STATE MANAGEMENT</h2>
                <div class="category-stats">
                    <div class="stat" id="data-stats">0/0 tests</div>
                    <div class="stat" id="data-coverage">0%</div>
                </div>
            </div>
            <div class="detailed-results" id="data-results">
                <!-- R√©sultats d√©taill√©s des donn√©es -->
            </div>
        </div>

        <!-- Console Avanc√©e -->
        <div class="test-category">
            <div class="category-header">
                <h2>üìü CONSOLE DE DEBUG AVANC√âE</h2>
                <div class="category-stats">
                    <div class="stat" id="console-stats">0 logs</div>
                </div>
            </div>
            <div class="advanced-console" id="advanced-console">
                <div class="console-header">
                    <span>Journal d'ex√©cution des tests</span>
                    <span id="console-time">[00:00:00]</span>
                </div>
                <div class="log-entry">
                    <span class="log-timestamp">[00:00:00.000]</span>
                    <span class="log-level level-info">INFO</span>
                    <span class="log-message">Syst√®me de test ultra-complet initialis√©</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ============================================================================
        // CONFIGURATION ULTRA-COMPL√àTE DES TESTS
        // ============================================================================

        const ULTRA_TEST_CONFIG = {
            modules: [
                { path: './scripts/core/program-data.js', type: 'CLASS' },
                { path: './scripts/ui/workout-renderer.js', type: 'CLASS' },
                { path: './scripts/ui/navigation-ui.js', type: 'CLASS' },
                { path: './scripts/modules/timer-manager.js', type: 'CLASS' },
                { path: './scripts/modules/workout-session.js', type: 'CLASS' },
                { path: './scripts/storage/local-storage.js', type: 'MODULE' },
                { path: './scripts/utils/helpers.js', type: 'MODULE' }
            ],
            domElements: [
                'app', 'workout-container', 'week-display', 'prev-week', 'next-week',
                'timer-display', 'timer-start', 'timer-pause', 'timer-reset'
            ],
            fileStructure: [
                './index.html',
                './scripts/',
                './scripts/core/',
                './scripts/ui/',
                './scripts/modules/',
                './scripts/storage/'
            ]
        };

        // ============================================================================
        // SYST√àME DE TEST ULTRA-COMPLET
        // ============================================================================

        class UltraTestRunner {
            constructor() {
                this.results = {
                    modules: { tests: [], stats: { total: 0, passed: 0, failed: 0 } },
                    dom: { tests: [], stats: { total: 0, passed: 0, failed: 0 } },
                    data: { tests: [], stats: { total: 0, passed: 0, failed: 0 } },
                    performance: { tests: [], stats: { total: 0, passed: 0, failed: 0 } },
                    architecture: { tests: [], stats: { total: 0, passed: 0, failed: 0 } }
                };
                this.consoleLogs = [];
                this.totalTests = 0;
                this.completedTests = 0;
            }

            // Logging avanc√©
            log(message, level = 'info') {
                const timestamp = new Date().toLocaleTimeString() + '.' + new Date().getMilliseconds().toString().padStart(3, '0');
                const logEntry = { timestamp, level, message };
                this.consoleLogs.push(logEntry);

                // Mise √† jour UI
                this.updateConsoleUI(logEntry);
                this.updateConsoleStats();
            }

            updateConsoleUI(logEntry) {
                const console = document.getElementById('advanced-console');
                const logElement = document.createElement('div');
                logElement.className = 'log-entry fade-in';
                logElement.innerHTML = `
                    <span class="log-timestamp">[${logEntry.timestamp}]</span>
                    <span class="log-level level-${logEntry.level}">${logEntry.level.toUpperCase()}</span>
                    <span class="log-message">${logEntry.message}</span>
                `;
                console.appendChild(logElement);
                console.scrollTop = console.scrollHeight;
            }

            updateConsoleStats() {
                document.getElementById('console-stats').textContent = `${this.consoleLogs.length} logs`;
                document.getElementById('console-time').textContent = `[${new Date().toLocaleTimeString()}]`;
            }

            // Mise √† jour de la progression
            updateProgress() {
                this.completedTests++;
                const progress = (this.completedTests / this.totalTests) * 100;
                document.getElementById('global-progress').style.width = `${progress}%`;
                
                // Mise √† jour des stats globales
                this.updateGlobalStats();
            }

            // Test de module JavaScript
            async testModule(moduleConfig) {
                const testResult = {
                    id: `module-${moduleConfig.path}`,
                    title: `Module: ${moduleConfig.path}`,
                    description: `V√©rification du module ${moduleConfig.path}`,
                    category: 'modules',
                    status: 'pending'
                };

                try {
                    const response = await fetch(moduleConfig.path);
                    const exists = response.status === 200;
                    
                    testResult.status = exists ? 'success' : 'error';
                    testResult.message = exists ? 'Module trouv√© et accessible' : 'Module introuvable (404)';
                    testResult.details = { path: moduleConfig.path, status: response.status };
                    testResult.solution = exists ? null : `Cr√©er le fichier: ${moduleConfig.path}`;

                    this.log(`${exists ? '‚úÖ' : '‚ùå'} ${moduleConfig.path} - ${testResult.message}`, 
                            exists ? 'success' : 'error');

                } catch (error) {
                    testResult.status = 'error';
                    testResult.message = `Erreur: ${error.message}`;
                    testResult.solution = `V√©rifier le chemin: ${moduleConfig.path}`;
                    this.log(`‚ùå ${moduleConfig.path} - Erreur: ${error.message}`, 'error');
                }

                this.results.modules.tests.push(testResult);
                this.results.modules.stats.total++;
                if (testResult.status === 'success') {
                    this.results.modules.stats.passed++;
                } else {
                    this.results.modules.stats.failed++;
                }

                this.displayTestResult(testResult);
                this.updateProgress();
                return testResult;
            }

            // Test d'√©l√©ment DOM
            testDOMElement(elementId) {
                const testResult = {
                    id: `dom-${elementId}`,
                    title: `√âl√©ment DOM: #${elementId}`,
                    description: `V√©rification de la pr√©sence de l'√©l√©ment #${elementId}`,
                    category: 'dom',
                    status: 'pending'
                };

                const element = document.getElementById(elementId);
                const exists = !!element;
                
                testResult.status = exists ? 'success' : 'error';
                testResult.message = exists ? '√âl√©ment pr√©sent dans le DOM' : '√âl√©ment introuvable';
                testResult.details = { elementId, exists, tagName: element?.tagName };
                testResult.solution = exists ? null : `Ajouter dans index.html: &lt;div id="${elementId}"&gt;&lt;/div&gt;`;

                this.log(`${exists ? '‚úÖ' : '‚ùå'} #${elementId} - ${testResult.message}`, 
                        exists ? 'success' : 'error');

                this.results.dom.tests.push(testResult);
                this.results.dom.stats.total++;
                if (testResult.status === 'success') {
                    this.results.dom.stats.passed++;
                } else {
                    this.results.dom.stats.failed++;
                }

                this.displayTestResult(testResult);
                this.updateProgress();
                return testResult;
            }

            // Test de structure de fichier
            async testFileStructure(path) {
                const testResult = {
                    id: `file-${path}`,
                    title: `Structure: ${path}`,
                    description: `V√©rification du chemin ${path}`,
                    category: 'architecture',
                    status: 'pending'
                };

                try {
                    const response = await fetch(path);
                    const exists = response.status === 200;
                    
                    testResult.status = exists ? 'success' : 'error';
                    testResult.message = exists ? 'Chemin accessible' : 'Chemin introuvable';
                    testResult.details = { path, status: response.status };
                    testResult.solution = exists ? null : `Cr√©er le dossier/fichier: ${path}`;

                    this.log(`${exists ? '‚úÖ' : '‚ùå'} ${path} - ${testResult.message}`, 
                            exists ? 'success' : 'error');

                } catch (error) {
                    testResult.status = 'error';
                    testResult.message = `Erreur d'acc√®s`;
                    testResult.solution = `V√©rifier le chemin: ${path}`;
                    this.log(`‚ùå ${path} - Erreur d'acc√®s`, 'error');
                }

                this.results.architecture.tests.push(testResult);
                this.results.architecture.stats.total++;
                if (testResult.status === 'success') {
                    this.results.architecture.stats.passed++;
                } else {
                    this.results.architecture.stats.failed++;
                }

                this.displayTestResult(testResult);
                this.updateProgress();
                return testResult;
            }

            // Affichage du r√©sultat
            displayTestResult(testResult) {
                const categoryElement = document.getElementById(`${testResult.category}-results`);
                if (!categoryElement) return;

                const testElement = document.createElement('div');
                testElement.className = `test-case ${testResult.status} fade-in`;
                testElement.innerHTML = `
                    <div class="test-header">
                        <div class="test-title">${testResult.title}</div>
                        <div class="test-badge badge-${testResult.status}">
                            ${testResult.status === 'success' ? '‚úì R√âUSSI' : 
                              testResult.status === 'error' ? '‚úï ERREUR' : '‚ùì INCONNU'}
                        </div>
                    </div>
                    <div class="test-description">${testResult.description}</div>
                    ${testResult.message ? `<div class="test-details"><strong>R√©sultat:</strong> ${testResult.message}</div>` : ''}
                    ${testResult.solution ? `
                        <div class="test-solution">
                            <div class="solution-title">üí° SOLUTION RECOMMAND√âE</div>
                            ${testResult.solution}
                        </div>
                    ` : ''}
                `;

                categoryElement.appendChild(testElement);
            }

            // Mise √† jour des statistiques globales
            updateGlobalStats() {
                let totalTests = 0;
                let passedTests = 0;
                let failedTests = 0;

                Object.values(this.results).forEach(category => {
                    totalTests += category.stats.total;
                    passedTests += category.stats.passed;
                    failedTests += category.stats.failed;
                });

                const coverage = totalTests > 0 ? Math.round((passedTests / totalTests) * 100) : 0;

                document.getElementById('total-tests').textContent = totalTests;
                document.getElementById('passed-tests').textContent = passedTests;
                document.getElementById('failed-tests').textContent = failedTests;
                document.getElementById('coverage').textContent = `${coverage}%`;

                // Mise √† jour des stats par cat√©gorie
                Object.keys(this.results).forEach(category => {
                    const stats = this.results[category].stats;
                    const coverage = stats.total > 0 ? Math.round((stats.passed / stats.total) * 100) : 0;
                    const statsElement = document.getElementById(`${category}-stats`);
                    const coverageElement = document.getElementById(`${category}-coverage`);
                    
                    if (statsElement) statsElement.textContent = `${stats.passed}/${stats.total} tests`;
                    if (coverageElement) coverageElement.textContent = `${coverage}%`;
                });
            }

            // Lancement de tous les tests
            async runAllTests() {
                this.log('üöÄ D√âMARRAGE DE TOUS LES TESTS ULTRA-COMPLETS', 'info');
                document.getElementById('global-status').textContent = 'TESTS EN COURS...';
                document.getElementById('global-status').style.background = 'var(--warning)';

                // R√©initialisation
                this.results = {
                    modules: { tests: [], stats: { total: 0, passed: 0, failed: 0 } },
                    dom: { tests: [], stats: { total: 0, passed: 0, failed: 0 } },
                    data: { tests: [], stats: { total: 0, passed: 0, failed: 0 } },
                    performance: { tests: [], stats: { total: 0, passed: 0, failed: 0 } },
                    architecture: { tests: [], stats: { total: 0, passed: 0, failed: 0 } }
                };
                this.totalTests = ULTRA_TEST_CONFIG.modules.length + 
                                ULTRA_TEST_CONFIG.domElements.length + 
                                ULTRA_TEST_CONFIG.fileStructure.length;
                this.completedTests = 0;

                // Vider les r√©sultats
                document.querySelectorAll('.detailed-results').forEach(el => {
                    el.innerHTML = '';
                });

                // Tests des modules
                this.log('üì¶ Test des modules JavaScript...', 'info');
                for (const module of ULTRA_TEST_CONFIG.modules) {
                    await this.testModule(module);
                    await new Promise(resolve => setTimeout(resolve, 100));
                }

                // Tests DOM
                this.log('üåê Test des √©l√©ments DOM...', 'info');
                for (const elementId of ULTRA_TEST_CONFIG.domElements) {
                    this.testDOMElement(elementId);
                    await new Promise(resolve => setTimeout(resolve, 50));
                }

                // Tests de structure
                this.log('üèóÔ∏è Test de la structure des fichiers...', 'info');
                for (const path of ULTRA_TEST_CONFIG.fileStructure) {
                    await this.testFileStructure(path);
                    await new Promise(resolve => setTimeout(resolve, 100));
                }

                // Finalisation
                document.getElementById('global-status').textContent = 'TESTS TERMIN√âS ‚úì';
                document.getElementById('global-status').style.background = 'var(--success)';
                this.log('‚úÖ TOUS LES TESTS ULTRA-COMPLETS TERMIN√âS', 'success');
                
                const total = this.totalTests;
                const passed = Object.values(this.results).reduce((sum, cat) => sum + cat.stats.passed, 0);
                this.log(`üìä R√âSUM√â: ${passed}/${total} tests r√©ussis (${Math.round((passed/total)*100)}%)`, 'info');
            }

            // G√©n√©ration de rapport d√©taill√©
            generateUltraReport() {
                const report = {
                    timestamp: new Date().toISOString(),
                    config: ULTRA_TEST_CONFIG,
                    results: this.results,
                    logs: this.consoleLogs,
                    summary: this.getSummary(),
                    solutions: this.getSolutions()
                };

                const blob = new Blob([JSON.stringify(report, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `ultra-test-report-${new Date().toISOString().replace(/[:.]/g, '-')}.json`;
                a.click();

                this.log('üìä Rapport ultra-d√©taill√© g√©n√©r√© et t√©l√©charg√©', 'success');
            }

            getSummary() {
                const total = this.totalTests;
                const passed = Object.values(this.results).reduce((sum, cat) => sum + cat.stats.passed, 0);
                return {
                    totalTests: total,
                    passedTests: passed,
                    failedTests: total - passed,
                    successRate: total > 0 ? (passed / total) * 100 : 0
                };
            }

            getSolutions() {
                const solutions = [];
                Object.values(this.results).forEach(category => {
                    category.tests.forEach(test => {
                        if (test.status !== 'success' && test.solution) {
                            solutions.push({
                                category: test.category,
                                problem: test.title,
                                solution: test.solution,
                                priority: test.status === 'error' ? 'HIGH' : 'MEDIUM'
                            });
                        }
                    });
                });
                return solutions;
            }
        }

        // ============================================================================
        // INTERFACE UTILISATEUR
        // ============================================================================

        let testRunner;

        function showCategory(category) {
            // Masquer toutes les cat√©gories
            document.querySelectorAll('.test-category').forEach(el => {
                el.style.display = 'none';
            });
            
            // Afficher la cat√©gorie s√©lectionn√©e
            document.getElementById(`category-${category}`).style.display = 'block';
            
            // Mettre √† jour la navigation
            document.querySelectorAll('.nav-test-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        function runAllTests() {
            if (!testRunner) {
                testRunner = new UltraTestRunner();
            }
            testRunner.runAllTests();
        }

        function generateUltraReport() {
            if (testRunner) {
                testRunner.generateUltraReport();
            } else {
                alert('Veuillez d\'abord ex√©cuter les tests');
            }
        }

        function stressTest() {
            if (testRunner) {
                testRunner.log('üí• Test de stress d√©marr√©...', 'warn');
                // Simulation de test de charge
                for (let i = 0; i < 10; i++) {
                    setTimeout(() => {
                        testRunner.log(`Test de charge ${i+1}/10`, 'debug');
                    }, i * 200);
                }
                setTimeout(() => {
                    testRunner.log('‚úÖ Test de stress termin√©', 'success');
                }, 2500);
            }
        }

        // Initialisation
        document.addEventListener('DOMContentLoaded', function() {
            testRunner = new UltraTestRunner();
            testRunner.log('Syst√®me de test ultra-complet initialis√© et pr√™t', 'success');
        });
    </script>
</body>
</html>
